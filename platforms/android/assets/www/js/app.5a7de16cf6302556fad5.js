webpackJsonp([1],{139:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=s(98),e=s(402),n=s.n(e),r=s(377),l=(s.n(r),s(387)),o=s.n(l),c=s(388),d=s.n(c),v=s(389),u=s.n(v),f=s(141);if(i.a.use(n.a),i.a.config.productionTip=!1,i.a.use(o.a),i.a.use(d.a),"file:"===window.location.protocol||"3000"===window.location.port){var p=document.createElement("script");p.setAttribute("type","text/javascript"),p.setAttribute("src","cordova.js"),document.body.appendChild(p)}new i.a({el:"#app",router:f.a,template:"<App/>",components:{App:u.a},head:{meta:[{name:"viewport",content:"width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"}]}})},141:function(t,a,s){"use strict";var i=s(149);s.n(i),s(98),s(400);throw new Error('Cannot find module "vue-config"')},142:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=s(98);a.default={data:function(){return{cordova:i.a.cordova,clipped:!1,drawer:!0,miniVariant:!1,right:!0,rightDrawer:!1,title:"Visite"}}}},143:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=s(150),e=(s.n(i),s(97));s.n(e);throw new Error('Cannot find module "vue2-google-maps"')},144:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=s(97),e=s.n(i),n=s(393),r=s.n(n);a.default={name:"List",components:{navbar:e.a,tour:r.a},data:function(){return{tours:null}},methods:{loadList:function(){var t=this,a=setInterval(function(){t.$http.get(t.$config.tourApi+"/all").then(function(s){t.tours=JSON.parse(s.bodyText),clearInterval(a)})},800)},startup:function(){var t=this;if(this.loadList(),void 0!==this.$route.params.agent&&void 0!==this.$route.params.client&&void 0!==this.$route.params.address&&void 0!==this.$route.params.clientSignature&&void 0!==this.$route.params.agentSignature)if(void 0!==this.$route.params.id)var a=setInterval(function(){t.$http.put(t.$config.tourApi+"/"+t.$route.params.id,{id_agent:t.$route.params.agent,id_visiteur:t.$route.params.client,date_visite:(new Date).toDateString(),signature_visiteur:t.$route.params.clientSignature,signature_agent:t.$route.params.agentSignature,adresse:t.$route.params.address}).then(function(s){clearInterval(a),t.loadList()})},800);else var s=setInterval(function(){t.$http.post(""+t.$config.tourApi,{id_agent:t.$route.params.agent,id_visiteur:t.$route.params.client,date_visite:(new Date).toDateString(),signature_visiteur:t.$route.params.clientSignature,signature_agent:t.$route.params.agentSignature,adresse:t.$route.params.address}).then(function(a){clearInterval(s),t.loadList()})},800)}},mounted:function(){this.startup()}}},145:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={name:"Navbar",props:["title"],beforeUpdate:function(){$(".button-collapse").sideNav("hide")}}},146:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=s(97),e=s.n(i);a.default={name:"Sign",components:{navbar:e.a},data:function(){return{clientSignature:null,agentSignature:null,role:"Agent"}},methods:{clear:function(){this.signaturePad.clear()},send:function(){this.signaturePad.isEmpty()||(null===this.clientSignature?(this.clientSignature=this.signaturePad.toDataURL("image/jpeg"),this.role="Visiteur",this.signaturePad.clear()):null===this.agentSignature&&(this.agentSignature=this.signaturePad.toDataURL("image/jpeg"),this.$router.push({name:"List",params:{agent:this.$route.params.agent,client:this.$route.params.client,address:this.$route.params.address,clientSignature:this.clientSignature,agentSignature:this.agentSignature,id:this.$route.params.id}})))}},created:function(){var t=this;setTimeout(function(){var a=document.querySelector("#signature");t.signaturePad=new SignaturePad(a),t.signaturePad.clear()},100)}}},147:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={name:"Tour",props:["tour"],components:{},data:function(){return{agent:null,client:null}},updated:function(){$("ul.tabs").tabs()},mounted:function(){var t=this;this.$http.get(this.$config.agentApi+"/"+this.tour.id_agent).then(function(a){t.agent=JSON.parse(a.bodyText)}),this.$http.get(this.$config.clientApi+"/"+this.tour.id_visiteur).then(function(a){t.client=JSON.parse(a.bodyText)})},methods:{remove:function(){$("#removeModal-"+this.tour.id).modal(),$("#removeModal-"+this.tour.id).modal("open")},doRemove:function(){var t=this;this.$http.delete(this.$config.tourApi+"/"+this.tour.id).then(function(){t.$parent.loadList()})},call:function(){window.plugins.CallNumber.callNumber(function(){},function(){Materialize.toast("Une erreur s'est produite",4e3)},this.client.telephone,!0)}}}},377:function(t,a){},378:function(t,a){},379:function(t,a){},380:function(t,a){},381:function(t,a){},382:function(t,a){},383:function(t,a){},389:function(t,a,s){function i(t){s(380)}var e=s(46)(s(142),s(396),i,null,null);t.exports=e.exports},390:function(t,a,s){function i(t){s(381)}var e=s(46)(s(143),s(397),i,null,null);t.exports=e.exports},391:function(t,a,s){function i(t){s(378)}var e=s(46)(s(144),s(394),i,null,null);t.exports=e.exports},392:function(t,a,s){function i(t){s(382)}var e=s(46)(s(146),s(398),i,null,null);t.exports=e.exports},393:function(t,a,s){function i(t){s(383)}var e=s(46)(s(147),s(399),i,null,null);t.exports=e.exports},394:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("navbar",{attrs:{title:"Visites"}}),t._v(" "),s("div",{staticClass:"spacer"}),t._v(" "),s("div",{staticClass:"container",attrs:{id:"app"}},t._l(this.tours,function(t){return s("tour",{attrs:{tour:t}})}))],1)},staticRenderFns:[]}},395:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"navbar-fixed"},[s("nav",{staticClass:"nav-extended"},[s("div",{staticClass:"nav-content"},[s("span",{staticClass:"nav-title ml2"},[t._v(t._s(this.title))]),t._v(" "),s("router-link",{staticClass:"btn-floating btn-large halfway-fab waves-effect waves-light teal",attrs:{to:{name:"Edit",params:{tour:{}}}}},[s("i",{staticClass:"material-icons"},[t._v("add")])]),t._v(" "),t._m(0)],1)])])},staticRenderFns:[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("a",{staticClass:"half-fab-2nd btn-floating btn-large halfway-fab waves-effect waves-light teal"},[s("i",{staticClass:"material-icons"},[t._v("search")])])}]}},396:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement;return(t._self._c||a)("router-view")},staticRenderFns:[]}},397:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("navbar",{attrs:{title:this.$route.params.tour?"Modifier la visite":"Nouvelle visite"}}),t._v(" "),s("div",{staticClass:"spacer"}),t._v(" "),s("div",{staticClass:"container",attrs:{id:"app"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[s("div",{staticClass:"card z-depth-2"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[s("gmap-map",{staticClass:"gmap",attrs:{center:{lat:this.lat,lng:this.lng},zoom:17}}),t._v(" "),s("a",{staticClass:"locate btn-floating btn-large waves-effect waves-light red",on:{click:function(a){t.locate()}}},[s("i",{staticClass:"material-icons"},[t._v("my_location")])])],1)]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("input",{staticClass:"validate",attrs:{id:"address",type:"text"},domProps:{value:this.$route.params.tour?this.$route.params.tour.adresse:""}}),t._v(" "),s("label",{attrs:{for:"address"}},[t._v("Adresse")])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("div",{staticClass:"select2-label"},[t._v("Agent")]),t._v(" "),s("i",{staticClass:"material-icons prefix",on:{click:function(a){t.addAgent()}}},[t._v("add")]),t._v(" "),s("select",{attrs:{id:"agent"}})])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("div",{staticClass:"select2-label"},[t._v("Visiteur")]),t._v(" "),s("i",{staticClass:"material-icons prefix",on:{click:function(a){t.addClient()}}},[t._v("add")]),t._v(" "),s("select",{attrs:{id:"client"}})])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[s("div",{staticClass:"center-align"},[s("button",{staticClass:"btn waves-effect waves-light",on:{click:function(a){t.send()}}},[t._v("Confirmer\n                                                "),s("i",{staticClass:"material-icons right"},[t._v("send")])])])])])])])])])])])]),t._v(" "),s("div",{staticClass:"modal modal-fixed-footer",attrs:{id:"addAgentModal"}},[t._m(0),t._v(" "),s("div",{staticClass:"modal-footer"},[s("a",{staticClass:"modal-action modal-close waves-effect waves-green btn-flat ",on:{click:function(a){t.doAddAgent()}}},[t._v("Ajouter")])])]),t._v(" "),s("div",{staticClass:"modal modal-fixed-footer",attrs:{id:"addClientModal"}},[t._m(1),t._v(" "),s("div",{staticClass:"modal-footer"},[s("a",{staticClass:"modal-action modal-close waves-effect waves-green btn-flat ",on:{click:function(a){t.doAddClient()}}},[t._v("Ajouter")])])])],1)},staticRenderFns:[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-content"},[s("h4",[t._v("Nouvel agent")]),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("form",{staticClass:"col s12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("i",{staticClass:"material-icons prefix"},[t._v("person")]),t._v(" "),s("input",{staticClass:"validate",attrs:{id:"AgentFirstname",type:"text"}}),t._v(" "),s("label",{attrs:{for:"AgentFirstname"}},[t._v("Pr√©nom")])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("i",{staticClass:"material-icons prefix"},[t._v("person")]),t._v(" "),s("input",{staticClass:"validate",attrs:{id:"AgentLastname",type:"text"}}),t._v(" "),s("label",{attrs:{for:"AgentLastname"}},[t._v("Nom")])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("i",{staticClass:"material-icons prefix"},[t._v("phone")]),t._v(" "),s("input",{staticClass:"validate",attrs:{id:"AgentPhone",type:"tel"}}),t._v(" "),s("label",{attrs:{for:"AgentPhone"}},[t._v("T√©l√©phone")])])])])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-content"},[s("h4",[t._v("Nouveau visiteur")]),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("form",{staticClass:"col s12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("i",{staticClass:"material-icons prefix"},[t._v("person")]),t._v(" "),s("input",{staticClass:"validate",attrs:{id:"ClientFirstname",type:"text"}}),t._v(" "),s("label",{attrs:{for:"ClientFirstname"}},[t._v("Pr√©nom")])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("i",{staticClass:"material-icons prefix"},[t._v("person")]),t._v(" "),s("input",{staticClass:"validate",attrs:{id:"ClientLastname",type:"text"}}),t._v(" "),s("label",{attrs:{for:"ClientLastname"}},[t._v("Nom")])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("i",{staticClass:"material-icons prefix"},[t._v("phone")]),t._v(" "),s("input",{staticClass:"validate",attrs:{id:"ClientPhone",type:"tel"}}),t._v(" "),s("label",{attrs:{for:"ClientPhone"}},[t._v("T√©l√©phone")])])])])])])])}]}},398:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("navbar",{attrs:{title:"Signature "+this.role}}),t._v(" "),s("div",{staticClass:"spacer"}),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[s("div",{staticClass:"card z-depth-2"},[s("div",{staticClass:"container"},[s("div",{staticClass:"modal-content"},[s("h4",[t._v("Signez dans le cadre")]),t._v(" "),s("p",[t._v("En signant vous reconnaissez avoir visit√© le bien situ√© au "+t._s(this.$route.params.address))]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[s("div",{staticClass:"center-align"},[s("button",{staticClass:"btn waves-effect waves-light",on:{click:function(a){t.clear()}}},[t._v("Effacer\n                      "),s("i",{staticClass:"material-icons right"},[t._v("clear")])]),t._v(" "),s("button",{staticClass:"btn waves-effect waves-light",on:{click:function(a){t.send()}}},[t._v("Confirmer\n                      "),s("i",{staticClass:"material-icons right"},[t._v("send")])])])])])])])])])])])],1)},staticRenderFns:[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"row"},[s("canvas",{attrs:{id:"signature"}})])}]}},399:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col s12 m6"},[s("div",{staticClass:"card z-depth-2"},[s("div",{staticClass:"card-image"},[s("img",{attrs:{src:"https://orig00.deviantart.net/ede7/f/2016/103/7/8/april_12_2016_house_sketch_by_karisean-d9yta0s.png"}}),t._v(" "),s("span",{staticClass:"card-title"},[t._v("Visite")]),t._v(" "),s("a",{staticClass:"btn-floating halfway-fab waves-effect waves-light red",on:{click:function(a){t.remove()}}},[s("i",{staticClass:"material-icons"},[t._v("delete")])]),t._v(" "),s("router-link",{staticClass:"half-fab-2nd btn-floating halfway-fab waves-effect waves-light blue",attrs:{to:{name:"Edit",params:{tour:this.tour}}}},[s("i",{staticClass:"material-icons"},[t._v("edit")])]),t._v(" "),s("a",{staticClass:"half-fab-5th btn-floating halfway-fab waves-effect waves-light light-green accent-4",on:{click:function(a){t.call()}}},[s("i",{staticClass:"material-icons"},[t._v("phone")])])],1),t._v(" "),s("div",{staticClass:"card-content white lighten-4"},[s("ul",{staticClass:"tabs tab-fixed-width"},[s("li",{staticClass:"tab col s3 active"},[s("a",{attrs:{href:"#info-"+this.tour.id}},[t._v("Informations")])]),t._v(" "),s("li",{staticClass:"tab col s3"},[s("a",{attrs:{href:"#share-"+this.tour.id}},[t._v("Exporter")])])]),t._v(" "),s("div",{attrs:{id:"info-"+this.tour.id}},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"}),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col s3"},[s("p",[t._v(t._s(this.agent.first_name)+" "+t._s(this.agent.last_name))])]),t._v(" "),s("div",{staticClass:"col s3"},[s("p",[t._v(t._s(this.client.first_name)+" "+t._s(this.client.last_name))])]),t._v(" "),s("div",{staticClass:"col s3"},[s("p",[t._v(t._s(this.tour.date_visite))])]),t._v(" "),s("div",{staticClass:"col s3"},[s("p",[t._v(t._s(this.tour.adresse))])])])])]),t._v(" "),s("div",{attrs:{id:"share-"+this.tour.id}},[t._m(0)])])])])]),t._v(" "),s("div",{staticClass:"modal modal-fixed-footer",attrs:{id:"removeModal-"+this.tour.id}},[s("div",{staticClass:"modal-content"},[s("h4",[t._v("Supprimer ?")]),t._v(" "),s("p",{attrs:{id:"modal-text"}},[t._v("\n        √ätes vous de vouloir supprimer la visite du "+t._s(this.tour.date_visite)+" √† l'adresse :\n        "+t._s(this.tour.adresse)+"\n      ")])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("a",{staticClass:"modal-action modal-close waves-effect waves-red btn-flat",on:{click:function(a){t.doRemove()}}},[t._v("Supprimer")])])])])},staticRenderFns:[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container"},[s("div",{staticClass:"row"}),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col s4"},[s("a",{staticClass:"btn-floating red"},[s("i",{staticClass:"material-icons"},[t._v("mail")])])]),t._v(" "),s("div",{staticClass:"col s4"},[s("a",{staticClass:"btn-floating grey darken-1"},[s("i",{staticClass:"material-icons"},[t._v("print")])])]),t._v(" "),s("div",{staticClass:"col s4"},[s("a",{staticClass:"btn-floating deep-purple"},[s("i",{staticClass:"material-icons"},[t._v("picture_as_pdf")])])])])])}]}},403:function(t,a,s){s(140),t.exports=s(139)},97:function(t,a,s){function i(t){s(379)}var e=s(46)(s(145),s(395),i,null,null);t.exports=e.exports}},[403]);
//# sourceMappingURL=app.5a7de16cf6302556fad5.js.map